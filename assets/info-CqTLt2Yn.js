let r=[],g=[],a,f;const m=()=>{AOS.init({duration:800,easing:"ease-out-quad",once:!0,offset:120})},p=()=>{const e=document.querySelector("#article-progress-nav ul");e&&(r=document.querySelectorAll('.article-content-section section[id^="infoSection-"]'),r.forEach(o=>{const s=o.querySelector(".section-title").textContent,i=o.id,n=document.createElement("li"),t=document.createElement("a");t.href=`#${i}`,t.textContent=s,t.classList.add("scroll-link"),n.appendChild(t),e.appendChild(n)}),g=document.querySelectorAll("#article-progress-nav .scroll-link"))},d=()=>{if(!f||!a||r.length===0)return;const e=window.scrollY,o=window.innerHeight,i=document.documentElement.scrollHeight-o;let n=0;i>0&&(n=e/i*100,n>100&&(n=100)),a.style.width=`${n}%`;let t="";for(let c=r.length-1;c>=0;c--){const l=r[c],u=l.offsetTop,h=l.offsetHeight;if(e>=u-o/3&&e<u+h-o/3){t=l.id;break}}g.forEach(c=>{c.href.includes(t)&&t!==""?c.classList.add("active"):c.classList.remove("active")})},v=e=>{e.preventDefault();const o=e.currentTarget.getAttribute("href"),s=document.querySelector(o);if(s){const t=s.getBoundingClientRect().top+window.scrollY-70;window.scrollTo({top:t,behavior:"smooth"})}};document.addEventListener("DOMContentLoaded",()=>{m(),a=document.querySelector(".progress-bar-fill"),f=document.querySelector(".article-content-section"),p(),d(),window.addEventListener("scroll",()=>{d()}),g.forEach(e=>{e.addEventListener("click",v)}),window.addEventListener("resize",()=>{d()})});const S=document.getElementById("toggle-nav"),w=document.getElementById("article-progress-nav"),E=document.querySelector(".article-content-section");S.addEventListener("click",()=>{w.classList.toggle("hidden"),E.classList.toggle("nav-hidden")});document.addEventListener("scroll",()=>{document.querySelectorAll(".fade-section").forEach(e=>{e.getBoundingClientRect().top<window.innerHeight*.8&&e.classList.add("show")})});new bootstrap.ScrollSpy(document.body,{target:"#navbar",offset:70});
